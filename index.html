<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIREFOX-SAFE CHAOS ENGINE v3.0</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Courier New', monospace; 
            background: radial-gradient(circle, #0a0a0a, #1a1a2e, #16213e);
            color: #00ff00; 
            overflow-x: hidden;
            cursor: crosshair;
        }
        .chaos-header { 
            position: fixed; top: 0; left: 0; right: 0; 
            background: rgba(0,0,0,0.95); padding: 15px; 
            z-index: 9999; border-bottom: 2px solid #ff00ff;
            font-size: 11px;
        }
        .status-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
            gap: 5px; margin-top: 10px; max-height: 150px; overflow-y: auto;
        }
        .status-item { 
            padding: 5px; background: rgba(255,0,255,0.1); 
            border: 1px solid #ff00ff; border-radius: 3px;
            font-size: 10px; overflow: hidden;
        }
        .status-item.loaded { border-color: #00ff00; background: rgba(0,255,0,0.1); }
        .status-item.failed { border-color: #ff0000; background: rgba(255,0,0,0.1); }
        .library-slot { 
            position: relative; border: 1px dashed #333; 
            margin: 5px; padding: 10px; min-height: 150px;
            background: rgba(0,0,0,0.5); border-radius: 3px;
            transition: all 0.3s;
        }
        .library-slot:hover { transform: scale(1.02); border-color: #00ffff; }
        .error-placeholder { 
            background: rgba(255,0,0,0.2); padding: 20px; 
            border: 2px dotted #ff0000; border-radius: 5px;
        }
        .success-badge { 
            position: absolute; top: 5px; right: 5px; 
            background: #00ff00; color: #000; 
            padding: 2px 6px; border-radius: 3px; 
            font-size: 10px; font-weight: bold;
        }
        .failure-badge { 
            position: absolute; top: 5px; right: 5px; 
            background: #ff0000; color: #fff; 
            padding: 2px 6px; border-radius: 3px; 
            font-size: 10px; font-weight: bold;
        }
        .chaos-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 10px; margin-top: 200px; padding: 10px;
        }
        canvas { max-width: 100%; background: rgba(0,0,0,0.3); }
        .floating { animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .spinning { animation: spin 2s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .glitch { animation: glitch 0.3s infinite; }
        @keyframes glitch { 
            0% { transform: translate(0); } 
            20% { transform: translate(-2px, 2px); } 
            40% { transform: translate(-2px, -2px); } 
            60% { transform: translate(2px, 2px); } 
            80% { transform: translate(2px, -2px); } 
            100% { transform: translate(0); } 
        }
        .memory-bar { 
            position: fixed; bottom: 0; left: 0; right: 0; 
            height: 20px; background: #ff00ff; 
            transition: width 0.5s; z-index: 9999;
        }
    </style>
</head>
<body>
    <!-- CHAOS HEADER -->
    <div class="chaos-header">
        <h1 class="glitch">üö® FIREFOX-SAFE CHAOS ENGINE v3.0 üö®</h1>
        <div>Checking: <span id="checking-status">0</span>/100 | Loaded: <span id="loaded-count">0</span> | Failed: <span id="failed-count">0</span> | Memory: <span id="memory-mb">0</span>MB</div>
        <div class="status-grid" id="status-grid"></div>
    </div>

    <!-- MEMORY USAGE BAR -->
    <div class="memory-bar" id="memory-bar"></div>

    <!-- CHAOS GRID -->
    <div class="chaos-grid" id="chaos-grid"></div>

    <!-- ==================== 100 CDN LIBRARIES (ALL WITH DEFER) ==================== -->
    <!-- NO onload/onerror handlers - Firefox hates them -->
    
    <!-- CORE FRAMEWORKS -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ember.js/4.12.0/ember.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.4.1/backbone-min.js" defer></script>
    <script src="https://unpkg.com/alpinejs@3.13.5/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/preact@10.19.3/dist/preact.min.js" defer></script>
    <script src="https://unpkg.com/inferno@8.2.3/dist/inferno.min.js" defer></script>
    <script src="https://unpkg.com/mithril@2.2.2/mithril.min.js" defer></script>
    <script src="https://unpkg.com/riot@7.1.0/riot.min.js" defer></script>
    <script src="https://unpkg.com/hyperapp@2.0.22/index.js" defer></script>
    <script src="https://unpkg.com/surplus@0.5.5/compiler/index.js" defer></script>
    <script src="https://unpkg.com/maquette@4.0.3/dist/maquette.min.js" defer></script>
    <script src="https://unpkg.com/crank@0.5.1/crank.js" defer></script>

    <!-- GRAPHICS & 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" defer></script>
    <script src="https://cdn.babylonjs.com/babylon.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.3.2/pixi.min.js" defer></script>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/two.js@0.8.13/build/two.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.17/paper-full.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/easeljs/1.0.2/easeljs.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/konva@9.2.3/konva.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/zdog@1.1.3/dist/zdog.dist.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.7.0/lib/p5.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/addons/p5.sound.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p2.js/0.7.1/p2.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/planck-js/0.3.31/planck-with-testbed.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/cannon@0.6.2/build/cannon.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/polydecomp.js/0.1.1/polydecomp.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crafty/0.9.0/crafty.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/melonjs/13.1.0/melonjs.min.js" defer></script>

    <!-- ANIMATION -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/ScrollTrigger.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/2.0.6/velocity.min.js" defer></script>
    <script src="https://unpkg.com/popmotion@11.0.5/dist/popmotion.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mo-js/0.288.2/mo.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vivus/0.4.6/vivus.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/noframework.waypoints.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tilt.js/1.2.1/tilt.jquery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11.0.5/swiper-bundle.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flip/1.1.1/flip.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/scrollreveal/4.0.9/scrollreveal.min.js" defer></script>

    <!-- DATA VISUALIZATION -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js" defer></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sigma.js/2.4.0/sigma.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/highcharts@11.3.0/highcharts.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/frappe-charts@1.6.2/dist/frappe-charts.min.umd.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chartist@1.3.0/dist/chartist.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@nivo/core@0.84.0/umd/nivo-core.min.js" defer></script>
    <script src="https://unpkg.com/react-charts@3.0.0-beta.38/dist/index.umd.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/billboard.js@3.10.2/dist/billboard.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/vis-network@9.1.9/dist/vis-network.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/cal-heatmap@4.0.4/dist/cal-heatmap.min.js" defer></script>

    <!-- MAPS -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js" defer></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet" />
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.112/Build/Cesium/Cesium.js" defer></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.112/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="https://unpkg.com/ol@8.2.0/dist/ol.js" defer></script>
    <link rel="stylesheet" href="https://unpkg.com/ol@8.2.0/ol.css">
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-geo@3.1.0/dist/d3-geo.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/geolib@3.3.4/lib/geolib.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/proj4@2.9.2/dist/proj4.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js" defer></script>

    <!-- AUDIO -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/7.7.3/wavesurfer.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/vudio@2.0.1/dist/vudio.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/pizzicato@0.6.4/distr/Pizzicato.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/webpd@2.1.1/dist/webpd.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/crunker@1.0.0/dist/crunker.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/dancer@0.3.3/dancer.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/wad@0.1.0/build/wad.min.js" defer></script>

    <!-- UI KITS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/antd@5.12.8/dist/antd.min.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/antd@5.12.8/dist/reset.css">
    <script src="https://unpkg.com/emotion@11.11.0/dist/emotion.umd.min.js" defer></script>
    <script src="https://unpkg.com/styled-components@6.1.1/dist/styled-components.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@material-ui/core@4.12.4/umd/material-ui.production.min.js" defer></script>
    <script src="https://unpkg.com/chakra-ui@0.8.0/dist/umd/chakra-ui.js" defer></script>
    <script src="https://unpkg.com/primevue@3.40.1/primevue.all.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/vuetify@3.4.6/dist/vuetify.min.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@3.4.6/dist/vuetify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/element-ui@2.15.14/lib/index.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-ui@2.15.14/lib/theme-chalk/index.css">
    <script src="https://cdn.jsdelivr.net/npm/@blueprintjs/core@5.6.0/lib/cjs/blueprint.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@blueprintjs/core@5.6.0/lib/css/blueprint.css">

    <!-- MACHINE LEARNING -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.14.0/dist/tf.min.js" defer></script>
    <script src="https://unpkg.com/ml5@1/dist/ml5.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@1.5.1/dist/tfjs-vis.umd.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@2.1.0/dist/mobilenet.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.2/dist/coco-ssd.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/posenet@2.2.2/dist/posenet.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/handpose@0.0.7/dist/handpose.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/facemesh@0.0.5/dist/facemesh.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder@1.3.3/dist/universal-sentence-encoder.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-automl@1.3.0/dist/tf-automl.min.js" defer></script>

    <!-- UTILITY -->
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/ramda@0.29.0/dist/ramda.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/immutable@4.3.4/dist/immutable.min.js" defer></script>
    <script src="https://unpkg.com/axios@1.6.5/dist/axios.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@3.0.6/index.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/validate.js/0.13.1/validate.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/ajv@8.12.0/dist/ajv.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/parsimmon@1.18.1/build/parsimmon.browser.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/comlink@4.4.1/dist/umd/comlink.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.10/dist/ffmpeg.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/wasm-feature-detect@1.6.1/dist/umd/index.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js" defer></script>

    <!-- REAL-TIME -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@aspnet/signalr@1.1.4/dist/browser/signalr.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/reconnecting-websocket@4.4.0/dist/reconnecting-websocket-mjs.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-peer@9.11.1/simplepeer.min.js" defer></script>

    <!-- ==================== MASTER INITIALIZATION (FIREFOX-SAFE) ==================== -->
    <script>
        // Wait for ALL scripts to parse (deferred ensures this)
        document.addEventListener('DOMContentLoaded', () => {
            // Give extra time for network delays
            setTimeout(checkAndInitializeLibraries, 4000);
        });

        function checkAndInitializeLibraries() {
            const libraries = [
                // [GlobalVariableName, DisplayName, Category]
                ['React', 'React 18', 'framework'],
                ['ReactDOM', 'ReactDOM', 'framework'],
                ['Vue', 'Vue 3', 'framework'],
                ['angular', 'Angular 1.x', 'framework'],
                ['Ember', 'Ember', 'framework'],
                ['Backbone', 'Backbone', 'framework'],
                ['Alpine', 'Alpine.js', 'framework'],
                ['preact', 'Preact', 'framework'],
                ['Inferno', 'Inferno', 'framework'],
                ['m', 'Mithril', 'framework'],
                ['riot', 'Riot.js', 'framework'],
                ['hyperapp', 'Hyperapp', 'framework'],
                ['surplus', 'Surplus', 'framework'],
                ['maquette', 'Maquette', 'framework'],
                ['Crank', 'Crank', 'framework'],
                
                ['THREE', 'Three.js', '3d'],
                ['BABYLON', 'Babylon.js', '3d'],
                ['Phaser', 'Phaser', '3d'],
                ['PIXI', 'PixiJS', '3d'],
                ['AFRAME', 'A-Frame', '3d'],
                ['Two', 'Two.js', '3d'],
                ['paper', 'Paper.js', '3d'],
                ['createjs', 'EaselJS', '3d'],
                ['Konva', 'Konva', '3d'],
                ['fabric', 'Fabric.js', '3d'],
                ['Zdog', 'Zdog', '3d'],
                ['p5', 'p5.js', '3d'],
                ['Matter', 'Matter.js', '3d'],
                ['p2', 'p2.js', '3d'],
                ['planck', 'Planck.js', '3d'],
                ['CANNON', 'Cannon.js', '3d'],
                ['decomp', 'PolyDecomp', '3d'],
                ['Crafty', 'Crafty', '3d'],
                ['me', 'MelonJS', '3d'],
                
                ['gsap', 'GSAP', 'animation'],
                ['anime', 'Anime.js', 'animation'],
                ['Velocity', 'Velocity.js', 'animation'],
                ['popmotion', 'Popmotion', 'animation'],
                ['mojs', 'Mo.js', 'animation'],
                ['lottie', 'Lottie', 'animation'],
                ['Vivus', 'Vivus', 'animation'],
                ['Typed', 'Typed.js', 'animation'],
                ['Waypoint', 'Waypoints', 'animation'],
                ['tilt', 'Tilt.js', 'animation'],
                ['Splide', 'Splide', 'animation'],
                ['Swiper', 'Swiper', 'animation'],
                ['Flip', 'Flip', 'animation'],
                ['ScrollReveal', 'ScrollReveal', 'animation'],
                
                ['d3', 'D3.js', 'charts'],
                ['echarts', 'ECharts', 'charts'],
                ['Plotly', 'Plotly', 'charts'],
                ['Chart', 'Chart.js', 'charts'],
                ['ApexCharts', 'ApexCharts', 'charts'],
                ['c3', 'C3.js', 'charts'],
                ['sigma', 'Sigma.js', 'charts'],
                ['Highcharts', 'Highcharts', 'charts'],
                ['frappe', 'Frappe Charts', 'charts'],
                ['Chartist', 'Chartist', 'charts'],
                ['nivo', 'Nivo', 'charts'],
                ['ReactCharts', 'React Charts', 'charts'],
                ['bb', 'Billboard.js', 'charts'],
                ['vis', 'Vis Network', 'charts'],
                ['CalHeatmap', 'Cal-Heatmap', 'charts'],
                
                ['L', 'Leaflet', 'maps'],
                ['mapboxgl', 'Mapbox GL', 'maps'],
                ['Cesium', 'Cesium', 'maps'],
                ['ol', 'OpenLayers', 'maps'],
                ['turf', 'Turf.js', 'maps'],
                ['topojson', 'TopoJSON', 'maps'],
                ['d3Geo', 'D3 Geo', 'maps'],
                ['geolib', 'GeoLib', 'maps'],
                ['proj4', 'Proj4', 'maps'],
                ['MarkerCluster', 'Leaflet MarkerCluster', 'maps'],
                
                ['Tone', 'Tone.js', 'audio'],
                ['Howler', 'Howler.js', 'audio'],
                ['WaveSurfer', 'WaveSurfer', 'audio'],
                ['Vudio', 'Vudio', 'audio'],
                ['Pizzicato', 'Pizzicato', 'audio'],
                ['WebPd', 'WebPd', 'audio'],
                ['Crunker', 'Crunker', 'audio'],
                ['Dancer', 'Dancer', 'audio'],
                ['Wad', 'Wad', 'audio'],
                
                ['bootstrap', 'Bootstrap', 'ui'],
                ['antd', 'Ant Design', 'ui'],
                ['emotion', 'Emotion', 'ui'],
                ['styled', 'Styled Components', 'ui'],
                ['MaterialUI', 'Material-UI', 'ui'],
                ['chakra', 'Chakra UI', 'ui'],
                ['PrimeVue', 'PrimeVue', 'ui'],
                ['semantic', 'Semantic UI', 'ui'],
                ['Vuetify', 'Vuetify', 'ui'],
                ['ELEMENT', 'Element UI', 'ui'],
                ['Blueprint', 'Blueprint.js', 'ui'],
                
                ['tf', 'TensorFlow.js', 'ml'],
                ['ml5', 'ml5.js', 'ml'],
                ['tfvis', 'TensorFlow Vis', 'ml'],
                ['mobilenet', 'MobileNet', 'ml'],
                ['cocoSsd', 'Coco SSD', 'ml'],
                ['posenet', 'PoseNet', 'ml'],
                ['handpose', 'HandPose', 'ml'],
                ['facemesh', 'FaceMesh', 'ml'],
                ['use', 'Universal Sentence Encoder', 'ml'],
                ['tfautoml', 'TF AutoML', 'ml'],
                
                ['_', 'Lodash', 'utility'],
                ['R', 'Ramda', 'utility'],
                ['Immutable', 'Immutable.js', 'utility'],
                ['axios', 'Axios', 'utility'],
                ['dayjs', 'Day.js', 'utility'],
                ['luxon', 'Luxon', 'utility'],
                ['dateFns', 'date-fns', 'utility'],
                ['validate', 'Validate.js', 'utility'],
                ['Ajv', 'Ajv', 'utility'],
                ['Parsimmon', 'Parsimmon', 'utility'],
                ['Comlink', 'Comlink', 'utility'],
                ['FFmpeg', 'FFmpeg', 'utility'],
                ['wasmFeatureDetect', 'WASM Feature Detect', 'utility'],
                ['QRCode', 'QRCode', 'utility'],
                
                ['io', 'Socket.IO', 'realtime'],
                ['signalR', 'SignalR', 'realtime'],
                ['ReconnectingWebSocket', 'Reconnecting WebSocket', 'realtime'],
                ['Peer', 'PeerJS', 'realtime'],
                ['SimplePeer', 'Simple Peer', 'realtime']
            ];

            let loadedCount = 0;
            let failedCount = 0;
            let checkingIndex = 0;

            // Process libraries one by one with delay to avoid blocking
            function processNextLibrary() {
                if (checkingIndex >= libraries.length) {
                    // All processed
                    document.getElementById('checking-status').textContent = 'COMPLETE';
                    startChaosEffects();
                    return;
                }

                const [globalVar, displayName, category] = libraries[checkingIndex];
                document.getElementById('checking-status').textContent = checkingIndex + 1;

                setTimeout(() => {
                    if (typeof window[globalVar] !== 'undefined') {
                        // Library exists - initialize it
                        loadedCount++;
                        document.getElementById('loaded-count').textContent = loadedCount;
                        updateStatusItem(displayName, 'loaded');
                        initializeLibrary(displayName, globalVar, category);
                    } else {
                        // Library failed to load
                        failedCount++;
                        document.getElementById('failed-count').textContent = failedCount;
                        updateStatusItem(displayName, 'failed');
                        createFailedSlot(displayName);
                    }
                    checkingIndex++;
                    processNextLibrary(); // Process next
                }, 50); // Small delay between checks
            }

            // Start processing
            processNextLibrary();
        }

        function updateStatusItem(name, status) {
            const grid = document.getElementById('status-grid');
            const item = document.createElement('div');
            item.className = `status-item ${status}`;
            item.textContent = `${status === 'loaded' ? '‚úÖ' : '‚ùå'} ${name}`;
            grid.appendChild(item);
        }

        function initializeLibrary(name, globalVar, category) {
            const grid = document.getElementById('chaos-grid');
            const slot = document.createElement('div');
            slot.className = 'library-slot floating';
            slot.id = `slot-${name.replace(/\s/g, '-')}`;
            
            try {
                // Each library gets its own try-catch
                switch(category) {
                    case 'framework':
                        initializeFramework(slot, name, globalVar);
                        break;
                    case '3d':
                        initialize3D(slot, name, globalVar);
                        break;
                    case 'charts':
                        initializeChart(slot, name, globalVar);
                        break;
                    case 'animation':
                        initializeAnimation(slot, name, globalVar);
                        break;
                    case 'maps':
                        initializeMap(slot, name, globalVar);
                        break;
                    case 'audio':
                        initializeAudio(slot, name, globalVar);
                        break;
                    case 'ml':
                        initializeML(slot, name, globalVar);
                        break;
                    default:
                        // Generic initialization
                        slot.innerHTML = `
                            <div class="success-badge">‚úÖ LOADED</div>
                            <h3>${name}</h3>
                            <p>Global: ${globalVar}</p>
                            <small>Category: ${category}</small>
                        `;
                        grid.appendChild(slot);
                }
            } catch (error) {
                createFailedSlot(name, error.message);
            }
        }

        // Individual initialization functions (all wrapped in try-catch)
        function initializeFramework(slot, name, globalVar) {
            slot.innerHTML = `<div class="success-badge">‚úÖ ACTIVE</div><div id="${globalVar}-root"></div>`;
            document.getElementById('chaos-grid').appendChild(slot);
            
            try {
                if (globalVar === 'React' && typeof ReactDOM !== 'undefined') {
                    const root = ReactDOM.createRoot(document.getElementById('React-root'));
                    root.render(React.createElement('div', {className: 'spinning'}, '‚öõÔ∏è React 18'));
                } else if (globalVar === 'Vue') {
                    Vue.createApp({ template: '<div class="glitch">üü¢ Vue 3</div>' }).mount('#Vue-root');
                } else if (globalVar === 'Alpine') {
                    // Alpine auto-initializes
                    document.getElementById('Alpine-root').innerHTML = '<div x-data="{ msg: \'üèîÔ∏è Alpine.js\' }" x-text="msg"></div>';
                } else {
                    document.getElementById(`${globalVar}-root`).innerHTML = `<h3>${name}</h3><p>Framework loaded</p>`;
                }
            } catch (e) {
                throw new Error(`Init failed: ${e.message}`);
            }
        }

        function initialize3D(slot, name, globalVar) {
            slot.innerHTML = `<div class="success-badge">‚úÖ 3D ACTIVE</div><canvas id="${globalVar}-canvas" width="300" height="200"></canvas>`;
            document.getElementById('chaos-grid').appendChild(slot);
            
            try {
                if (globalVar === 'THREE') {
                    const scene = new THREE.Scene();
                    const camera = new THREE.PerspectiveCamera(75, 1.5, 0.1, 1000);
                    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('THREE-canvas'), alpha: true });
                    renderer.setSize(300, 200);
                    const geo = new THREE.IcosahedronGeometry(1, 0);
                    const mat = new THREE.MeshNormalMaterial();
                    const mesh = new THREE.Mesh(geo, mat);
                    scene.add(mesh);
                    camera.position.z = 3;
                    const animate = () => {
                        requestAnimationFrame(animate);
                        mesh.rotation.x += 0.01; mesh.rotation.y += 0.02;
                        renderer.render(scene, camera);
                    };
                    animate();
                } else if (globalVar === 'PIXI') {
                    const app = new PIXI.Application({ width: 300, height: 200, backgroundColor: 0x1099bb });
                    document.getElementById('PIXI-canvas').replaceWith(app.view);
                    const graphics = new PIXI.Graphics();
                    graphics.beginFill(0x00ff00); graphics.drawCircle(150, 100, 50); graphics.endFill();
                    app.stage.addChild(graphics);
                } else {
                    document.getElementById(`${globalVar}-canvas`).style.background = 'linear-gradient(45deg, #0f0, #f0f)';
                }
            } catch (e) {
                throw new Error(`3D Init failed: ${e.message}`);
            }
        }

        // ... Similar safe functions for charts, animations, etc.

        function createFailedSlot(name, error = 'Library not loaded') {
            const grid = document.getElementById('chaos-grid');
            const slot = document.createElement('div');
            slot.className = 'library-slot';
            slot.innerHTML = `
                <div class="failure-badge">‚ùå FAILED</div>
                <div class="error-placeholder">
                    <h3>${name}</h3>
                    <p>${error}</p>
                    <small>Chaos continues uninterrupted.</small>
                </div>
            `;
            grid.appendChild(slot);
        }

        function startChaosEffects() {
            // Global chaos effects that don't depend on any library
            setInterval(() => {
                document.querySelectorAll('.library-slot').forEach((el, i) => {
                    el.style.transform = `rotate(${Math.sin(Date.now() * 0.001 + i) * 2}deg)`;
                    el.style.filter = `hue-rotate(${Date.now() * 0.1 % 360}deg) saturate(2)`;
                });
            }, 50);

            // Final chaos after 10 seconds
            setTimeout(() => {
                document.body.style.animation = 'spin 20s linear infinite';
                document.body.style.filter = 'invert(1) hue-rotate(180deg)';
            }, 10000);
        }

        // Update memory usage
        setInterval(() => {
            if (performance.memory) {
                const memMB = (performance.memory.usedJSHeapSize / 1048576).toFixed(2);
                document.getElementById('memory-mb').textContent = memMB;
                const memPercent = Math.min((memMB / 2000) * 100, 100); // Scale to 2GB
                document.getElementById('memory-bar').style.width = memPercent + '%';
                
                // Warning colors
                const bar = document.getElementById('memory-bar');
                if (memPercent > 75) bar.style.background = '#ff0000';
                else if (memPercent > 50) bar.style.background = '#ffaa00';
                else bar.style.background = '#00ff00';
            }
        }, 500);
    </script>
</body>
</html>
